{"ast":null,"code":"import { legacy_createStore } from 'redux';\nimport { nanoid } from 'nanoid';\nconst initialstate = {\n  todos: [],\n  username: '',\n  isAuthenticated: false,\n  errorMessage: ''\n};\nconst todoReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialstate;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  if (action.type === 'add-todo') {\n    let updatedTodos = [...state.todos, {\n      text: action.enteredTask,\n      id: nanoid()\n    }];\n    // console.log(updatedTodos);\n    let userdata = JSON.parse(localStorage.getItem(state.username));\n    userdata.todos = updatedTodos;\n    localStorage.setItem(state.username, JSON.stringify(userdata));\n    return {\n      ...state,\n      todos: updatedTodos\n    };\n  } else if (action.type === 'edit-todo') {\n    let updatedTodos = state.todos.map(item => {\n      if (item.id === action.key) {\n        item.text = action.newText;\n      }\n      return item;\n    });\n  } else if (action.type === 'remove-todo') {\n    let updatedTodos = state.todos.filter(item => {\n      return item.id !== action.key;\n    });\n    let userdata = JSON.parse(localStorage.getItem(state.username));\n    userdata.todos = updatedTodos;\n    localStorage.setItem(state.username, JSON.stringify(userdata));\n    return {\n      ...state,\n      todos: updatedTodos\n    };\n  } else if (action.type === 'logout') {\n    return {\n      isAuthenticated: false,\n      todos: [],\n      username: '',\n      errorMessage: ''\n    };\n  } else if (action.type === 'login') {\n    let user = JSON.parse(localStorage.getItem(action.user.email));\n    if (user) {\n      if (action.user.password === user.password) {\n        return {\n          isAuthenticated: true,\n          todos: user.todos,\n          username: user.email,\n          errorMessage: ''\n        };\n      } else {\n        return {\n          isAuthenticated: false,\n          todos: [],\n          username: '',\n          errorMessage: 'User not found'\n        };\n      }\n    }\n    return {\n      isAuthenticated: false,\n      todos: [],\n      username: '',\n      errorMessage: 'User not found'\n    };\n  } else if (action.type === 'signup') {\n    let user = JSON.parse(localStorage.getItem(action.user.email));\n    action.user['todos'] = [];\n    if (user) {\n      return {\n        isAuthenticated: false,\n        todos: [],\n        username: '',\n        errorMessage: 'user already exist'\n      };\n    } else {\n      localStorage.setItem(action.user.email, JSON.stringify(action.user));\n      return {\n        isAuthenticated: true,\n        todos: [],\n        username: action.user.email,\n        errorMessage: ''\n      };\n    }\n  }\n  return state;\n};\nconst store = legacy_createStore(todoReducer);\nexport default store;","map":{"version":3,"names":["legacy_createStore","nanoid","initialstate","todos","username","isAuthenticated","errorMessage","todoReducer","state","arguments","length","undefined","action","type","updatedTodos","text","enteredTask","id","userdata","JSON","parse","localStorage","getItem","setItem","stringify","map","item","key","newText","filter","user","email","password","store"],"sources":["/Users/tkniranjanbhai/Desktop/React-Course/04-starting-project/src/store/index.js"],"sourcesContent":["import {legacy_createStore} from 'redux';\nimport {nanoid} from 'nanoid';\nconst initialstate={\n    todos:[],\n    username:'',\n    isAuthenticated:false,\n    errorMessage:'',\n}\nconst todoReducer=(state=initialstate,action)=>{\n    if(action.type==='add-todo')\n    {\n        let updatedTodos=[...state.todos,{\n            text:action.enteredTask,\n            id:nanoid()\n        }]\n        // console.log(updatedTodos);\n        let userdata=JSON.parse(localStorage.getItem(state.username));\n        userdata.todos=updatedTodos;\n        localStorage.setItem(state.username,JSON.stringify(userdata));\n        return{\n            ...state,\n            todos:updatedTodos\n        };\n    }\n    else if(action.type==='edit-todo')\n    {\n        let updatedTodos=state.todos.map(item=>{\n            if(item.id===action.key)\n            {\n                item.text=action.newText;\n            }\n            return item;\n        })\n        \n    }\n    else if(action.type==='remove-todo')\n    {\n        let updatedTodos=state.todos.filter(item=>{\n            return item.id!==action.key;\n        })\n        let userdata=JSON.parse(localStorage.getItem(state.username));\n        userdata.todos=updatedTodos;\n        localStorage.setItem(state.username,JSON.stringify(userdata));\n        return{\n            ...state,\n            todos:updatedTodos\n        }\n    }\n    else if(action.type==='logout')\n    {\n        return {\n            isAuthenticated:false,\n            todos:[],\n            username:'',\n            errorMessage:''\n        }\n    }\n    else if(action.type==='login')\n    {\n        let user = JSON.parse(localStorage.getItem(action.user.email))\n        if(user){\n            if(action.user.password===user.password)\n            {\n                return {\n                    isAuthenticated:true,\n                    todos:user.todos,\n                    username:user.email,\n                    errorMessage:''\n                }\n            }\n            else\n            {\n                return{\n                    isAuthenticated:false,\n                    todos:[],\n                    username:'',\n                    errorMessage:'User not found'\n                }\n            }\n        }\n        return{\n            isAuthenticated:false,\n            todos:[],\n            username:'',\n            errorMessage:'User not found'\n        }\n        \n    }\n    else if(action.type==='signup')\n    {\n        let user = JSON.parse(localStorage.getItem(action.user.email));\n        action.user['todos'] = []\n        if(user)\n        {\n            return{\n                isAuthenticated:false,\n                todos:[],\n                username:'',\n                errorMessage:'user already exist'\n            }\n        }\n        else{\n            localStorage.setItem(action.user.email,JSON.stringify(action.user))\n            return {\n                isAuthenticated:true,\n                todos:[],\n                username:action.user.email,\n                errorMessage:''\n            }\n        }\n    }\n    return state;\n}\nconst store=legacy_createStore(todoReducer);\n\nexport default store;"],"mappings":"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"},"metadata":{},"sourceType":"module"}