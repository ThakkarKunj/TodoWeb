{"ast":null,"code":"import { legacy_createStore } from 'redux';\nimport { nanoid } from 'nanoid';\nconst initialstate = {\n  todos: [],\n  username: '',\n  isAuthenticated: false,\n  errorMessage: ''\n};\nconst todoReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialstate;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  if (action.type === 'add-todo') {\n    let updatedTodos = [...state.todos, {\n      text: action.enteredTask,\n      id: nanoid()\n    }];\n    // console.log(updatedTodos);\n    let userdata = JSON.parse(localStorage.getItem(state.username));\n    userdata.todos = updatedTodos;\n    localStorage.setItem(state.username);\n    return {\n      ...state,\n      todos: updatedTodos\n    };\n  } else if (action.type === 'remove-todo') {\n    let updatedTodos = state.todos.filter(item => {\n      return item.id !== action.key;\n    });\n    return {\n      ...state,\n      todos: updatedTodos\n    };\n  } else if (action.type === 'logout') {\n    return {\n      isAuthenticated: false,\n      todos: [],\n      username: '',\n      errorMessage: ''\n    };\n  } else if (action.type === 'login') {\n    let user = JSON.parse(localStorage.getItem(action.user.email));\n    if (user) {\n      return {\n        isAuthenticated: true,\n        todos: user.todos,\n        username: user.email,\n        errorMessage: ''\n      };\n    }\n    return {\n      isAuthenticated: false,\n      todos: [],\n      username: '',\n      errorMessage: 'User not found'\n    };\n  } else if (action.type === 'signup') {\n    action.user['todos'] = [];\n    localStorage.setItem(action.user.email, JSON.stringify(action.user));\n    return {\n      isAuthenticated: true,\n      todos: [],\n      username: action.user.email,\n      errorMessage: ''\n    };\n  }\n  return state;\n};\nconst store = legacy_createStore(todoReducer);\nexport default store;","map":{"version":3,"names":["legacy_createStore","nanoid","initialstate","todos","username","isAuthenticated","errorMessage","todoReducer","state","arguments","length","undefined","action","type","updatedTodos","text","enteredTask","id","userdata","JSON","parse","localStorage","getItem","setItem","filter","item","key","user","email","stringify","store"],"sources":["/Users/tkniranjanbhai/Desktop/React-Course/04-starting-project/src/store/index.js"],"sourcesContent":["import {legacy_createStore} from 'redux';\nimport {nanoid} from 'nanoid';\nconst initialstate={\n    todos:[],\n    username:'',\n    isAuthenticated:false,\n    errorMessage:'',\n}\nconst todoReducer=(state=initialstate,action)=>{\n    if(action.type==='add-todo')\n    {\n        let updatedTodos=[...state.todos,{\n            text:action.enteredTask,\n            id:nanoid()\n        }]\n        // console.log(updatedTodos);\n        let userdata=JSON.parse(localStorage.getItem(state.username));\n        userdata.todos=updatedTodos;\n        localStorage.setItem(state.username,)\n        return{\n            ...state,\n            todos:updatedTodos\n        };\n    }\n    else if(action.type==='remove-todo')\n    {\n        let updatedTodos=state.todos.filter(item=>{\n            return item.id!==action.key;\n        })\n        return{\n            ...state,\n            todos:updatedTodos\n        }\n    }\n    else if(action.type==='logout')\n    {\n        return {\n            isAuthenticated:false,\n            todos:[],\n            username:'',\n            errorMessage:''\n        }\n    }\n    else if(action.type==='login')\n    {\n        let user = JSON.parse(localStorage.getItem(action.user.email))\n        if(user){\n            return {\n                isAuthenticated:true,\n                todos:user.todos,\n                username:user.email,\n                errorMessage:''\n            }\n        }\n        return{\n            isAuthenticated:false,\n            todos:[],\n            username:'',\n            errorMessage:'User not found'\n\n        }\n        \n    }\n    else if(action.type==='signup')\n    {\n        action.user['todos'] = []\n        localStorage.setItem(action.user.email,JSON.stringify(action.user))\n        return {\n            isAuthenticated:true,\n            todos:[],\n            username:action.user.email,\n            errorMessage:''\n        }\n    }\n    return state;\n}\nconst store=legacy_createStore(todoReducer);\n\nexport default store;"],"mappings":"AAAA,SAAQA,kBAAkB,QAAO,OAAO;AACxC,SAAQC,MAAM,QAAO,QAAQ;AAC7B,MAAMC,YAAY,GAAC;EACfC,KAAK,EAAC,EAAE;EACRC,QAAQ,EAAC,EAAE;EACXC,eAAe,EAAC,KAAK;EACrBC,YAAY,EAAC;AACjB,CAAC;AACD,MAAMC,WAAW,GAAC,SAAAA,CAAA,EAA6B;EAAA,IAA5BC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACP,YAAY;EAAA,IAACU,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EACxC,IAAGC,MAAM,CAACC,IAAI,KAAG,UAAU,EAC3B;IACI,IAAIC,YAAY,GAAC,CAAC,GAAGN,KAAK,CAACL,KAAK,EAAC;MAC7BY,IAAI,EAACH,MAAM,CAACI,WAAW;MACvBC,EAAE,EAAChB,MAAM;IACb,CAAC,CAAC;IACF;IACA,IAAIiB,QAAQ,GAACC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACd,KAAK,CAACJ,QAAQ,CAAC,CAAC;IAC7Dc,QAAQ,CAACf,KAAK,GAACW,YAAY;IAC3BO,YAAY,CAACE,OAAO,CAACf,KAAK,CAACJ,QAAQ,CAAE;IACrC,OAAM;MACF,GAAGI,KAAK;MACRL,KAAK,EAACW;IACV,CAAC;EACL,CAAC,MACI,IAAGF,MAAM,CAACC,IAAI,KAAG,aAAa,EACnC;IACI,IAAIC,YAAY,GAACN,KAAK,CAACL,KAAK,CAACqB,MAAM,CAACC,IAAI,IAAE;MACtC,OAAOA,IAAI,CAACR,EAAE,KAAGL,MAAM,CAACc,GAAG;IAC/B,CAAC,CAAC;IACF,OAAM;MACF,GAAGlB,KAAK;MACRL,KAAK,EAACW;IACV,CAAC;EACL,CAAC,MACI,IAAGF,MAAM,CAACC,IAAI,KAAG,QAAQ,EAC9B;IACI,OAAO;MACHR,eAAe,EAAC,KAAK;MACrBF,KAAK,EAAC,EAAE;MACRC,QAAQ,EAAC,EAAE;MACXE,YAAY,EAAC;IACjB,CAAC;EACL,CAAC,MACI,IAAGM,MAAM,CAACC,IAAI,KAAG,OAAO,EAC7B;IACI,IAAIc,IAAI,GAAGR,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACV,MAAM,CAACe,IAAI,CAACC,KAAK,CAAC,CAAC;IAC9D,IAAGD,IAAI,EAAC;MACJ,OAAO;QACHtB,eAAe,EAAC,IAAI;QACpBF,KAAK,EAACwB,IAAI,CAACxB,KAAK;QAChBC,QAAQ,EAACuB,IAAI,CAACC,KAAK;QACnBtB,YAAY,EAAC;MACjB,CAAC;IACL;IACA,OAAM;MACFD,eAAe,EAAC,KAAK;MACrBF,KAAK,EAAC,EAAE;MACRC,QAAQ,EAAC,EAAE;MACXE,YAAY,EAAC;IAEjB,CAAC;EAEL,CAAC,MACI,IAAGM,MAAM,CAACC,IAAI,KAAG,QAAQ,EAC9B;IACID,MAAM,CAACe,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE;IACzBN,YAAY,CAACE,OAAO,CAACX,MAAM,CAACe,IAAI,CAACC,KAAK,EAACT,IAAI,CAACU,SAAS,CAACjB,MAAM,CAACe,IAAI,CAAC,CAAC;IACnE,OAAO;MACHtB,eAAe,EAAC,IAAI;MACpBF,KAAK,EAAC,EAAE;MACRC,QAAQ,EAACQ,MAAM,CAACe,IAAI,CAACC,KAAK;MAC1BtB,YAAY,EAAC;IACjB,CAAC;EACL;EACA,OAAOE,KAAK;AAChB,CAAC;AACD,MAAMsB,KAAK,GAAC9B,kBAAkB,CAACO,WAAW,CAAC;AAE3C,eAAeuB,KAAK"},"metadata":{},"sourceType":"module"}